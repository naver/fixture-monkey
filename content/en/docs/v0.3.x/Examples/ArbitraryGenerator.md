---
title: "ArbitraryGenerator"
linkTitle: "ArbitraryGenerator"
weight: 2
---
{{< alert color="secondary" title="Note">}}
Predefined ArbitraryGenerator can be found [here]({{< relref "/docs/v0.3.x/features/arbitrarygenerator" >}})
{{< /alert >}}

## Put ArbitraryGenerator
```java
@Test
void putArbitraryGenerator() {
    FixtureMonkey fixture = FixtureMonkey.builder()
        .putGenerator(CustomObject.class, FieldReflectionArbitraryGenerator.INSTANCE)
        .build();
	
    CustomObject customObject = fixture.giveMeOne(CustomObject.class);
    // generated by FieldReflectionArbitraryGenerator
}
```

## Set Default ArbitraryGenerator
```java
@Test
void putArbitraryGenerator() {
    FixtureMonkey fixture = FixtureMonkey.builder()
        .defaultGenerator(FieldReflectionArbitraryGenerator.INSTANCE)
        .build();
	
    CustomObject customObject = fixture.giveMeOne(CustomObject.class);
    // generated by FieldReflectionArbitraryGenerator
}
```

## Set ArbitraryGenerator In ArbitraryBuilder
```java
@Test
void setArbitraryGenerator() {
    FixtureMonkey fixture = FixtureMonkey.builder().build();
	
    Person personByBuilder = fixture.giveMeBuilder(Person.class)
	    .generator(ConstructorPropertiesArbitraryGenerator.INSTANCE)
	    .sample(); 
    // generated by ConstructorPropertiesArbitraryGenerator
}
```

## Custom ArbitraryGenerator
```java
public class CustomArbitraryGenerator implements ArbitraryGenerator {
		public CustomArbitraryGenerator() {
		}

		@Override
		public <T> Arbitrary<T> generate(ArbitraryType type, List<ArbitraryNode> nodes) {
			// using type and ArbitraryNodes to generate Arbitrary<T>
			return ...;
		}
	}
}
```

### WithCustomizer
```java
public class CustomArbitraryGenerator implements ArbitraryGenerator, WithFixtureCustomizer {
		private final ArbitraryCustomizers arbitraryCustomizers;

		public CustomArbitraryGenerator() {
			this(new ArbitraryCustomizers());
		}

		public CustomArbitraryGenerator(ArbitraryCustomizers arbitraryCustomizers) {
			this.arbitraryCustomizers = arbitraryCustomizers;
		}

		@Override
		public ArbitraryGenerator withFixtureCustomizers(ArbitraryCustomizers arbitraryCustomizers) {
			if (this.arbitraryCustomizers == arbitraryCustomizers) {
				return this;
			}

			return new CustomArbitraryGenerator(this.arbitraryCustomizers);
		}

		@Override
		public <T> Arbitrary<T> generate(ArbitraryType type, List<ArbitraryNode> nodes) {
			// using type and ArbitraryNodes to generate Arbitrary<T>
			return ...;
		}
	}
}
```

## Complex ArbitraryGenerator Features
### Set Field In JacksonArbitraryGenerator With @JsonProperty
```java
@Value
class Person {
    @JsonPropert("id")
    String personId;
}
@Test
void setFieldInJacksonArbitraryGeneratorWithJsonProperty() {
	// given
    FixtureMonkey fixture = FixtureMonkey.builder()
        .defaultGenerator(JacksonArbitraryGenerator.INSTANCE)
        .build();
    // when
    Person actual = fixture.giveMeBuilder(Person.class)
        .set("id", "12345")
        .sample();
    
    then(actual.personId).isEqualTo("12345");
}
```

### Add @ConstructorProperties Value When Field Name is Different
```java
class Person {
    String id;
    String name;
    
    @ConstructorProperties({"id", "personName"})
    public Person(String id, String personName){
    	this.id = id;
    	this.name = personName;
    }
}
@Test
void addConstructorPropertiesValueWhenFieldNameIsDifferent() {
	// given
    FixtureMonkey fixture = FixtureMonkey.builder()
        .defaultGenerator(ConstructorPropertiesGenerator.INSTANCE)
        .build();
    // when
	Person actual = fixture.giveMeOne(Person.class, new ArbitraryCustomizer<>() {
		@Override
		public void customizeFields(Class<Person> type, FieldArbitraries fieldArbitraries) {
			fieldArbitraries.putArbitrary("personName", Arbitraries.of("BROWN"));
		}
		@Override
		public Person customizeFixture(Person object) {
			return object;
		}
	});
	then(actual.id).isNotNull();
	then(actual.name).isEqualTo("BROWN");
}
```

### Add @ConstructorProperties Value Without Corresponding Field
```java
class Person {
    String id;
    
    @ConstructorProperties({"id", "idSuffix"})
    public Person(String id, String idSuffix){
    	this.id = id + idSuffix;
    }
}
@Test
void addConstructorPropertiesValueWithoutCorrespondingField() {
	// given
    FixtureMonkey fixture = FixtureMonkey.builder()
        .defaultGenerator(ConstructorPropertiesGenerator.INSTANCE)
        .build();
    // when
	Person actual = fixture.giveMeOne(Person.class, new ArbitraryCustomizer<>() {
		@Override
		public void customizeFields(Class<Person> type, FieldArbitraries fieldArbitraries) {
			fieldArbitraries.putArbitrary("idSuffix", Arbitraries.of("SALLY"));
		}
		@Override
		public Person customizeFixture(Person object) {
			return object;
		}
	});
	then(actual.id).contains("SALLY");
}
```
